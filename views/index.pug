extends layout

block content
  h1 Client Manger

  - var flashClassName=flash ? flash.status : 'hidden'
  - var flashMessage = flash ? flash.message : ''
  .flash(class=flashClassName)
    p.flash__message= flashMessage
    button.flash__close &times;

  .actions
    button.actions__clients--activate Activate Selected Clients
    button.actions__clients--deactivate Deactivate Selected Clients
    label(for='torrent') Upload File
      input(type='file' name='torrent')
    button.actions__torrents--activate Add Selected Torrents to Selected Clients
    button.actions__torrents--deactivate Remove Selected Torrents from Selected Clients

  .table.table__main
    .tr
      .td.col-30
        .table.table__torrents
          .thead
            .tr
              .th.col-90 Torrent Name
              .th.col-10
                input(type='checkbox'
                      name='torrents')
          tbody
            each torrent in torrents
              .tr(data-torrent-active=torrent.active, data-torrent=torrent.id)
                .td.col-90= torrent.name
                .td.col-10
                  input(type='checkbox'
                        name='torrents[]'
                        value=torrent.id)
      .td.col-70
        .table.table__clients
          .thead
            .tr
              .th.col-30 Client Name
              .th.col-25 RPC Port
              .th.col-25 Transmission Port
              .th.col-10 Active
              .th.col-10
                input(type='checkbox'
                      name='clients')

          tbody
            each client in clients
              .tr(data-client-active=client.active)
                .td.col-30= client.name
                .td.col-25= client.rpc_port
                .td.col-25= client.transmission_port
                .td.col-10
                  - var modifier = client.active ? 'active' : 'inactive'
                  span(class='indicator indicator--' + modifier
                      data-indicator-active=client.active)
                .td.col-10
                  input(type='checkbox'
                        name='clients[]'
                        value=client.id)
                .td.col-100
                  details.client__details
                    summary Torrents
                    .client__torrents
                      each torrent in client.torrents
                        .client__torrent
                          = torrent.name
                          .action__torrent.actions__torrent--deactivate(data-client=client.id
                                                                        data-torrent=torrent.id) &times;

